<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/taiji.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="了解SpringBoot如何使用">
<meta property="og:type" content="article">
<meta property="og:title" content="笔记-SpringBoot">
<meta property="og:url" content="http://yoursite.com/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/index.html">
<meta property="og:site_name" content="纸人">
<meta property="og:description" content="了解SpringBoot如何使用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.slf4j.org/images/concrete-bindings.png">
<meta property="og:image" content="http://www.slf4j.org/images/legacy.png">
<meta property="og:image" content="http://yoursite.com/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/SpringBoot%E5%BA%95%E5%B1%82%E6%97%A5%E5%BF%97%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB.png">
<meta property="og:image" content="http://www.slf4j.org/images/legacy.png">
<meta property="og:image" content="http://yoursite.com/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/jQuery-webjar.png">
<meta property="og:image" content="http://yoursite.com/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%9B%BE%E7%A4%BA.png">
<meta property="article:published_time" content="2020-04-29T16:16:34.000Z">
<meta property="article:modified_time" content="2020-05-09T10:17:47.130Z">
<meta property="article:author" content="纸人">
<meta property="article:tag" content="Java笔记">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="SpringBoot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.slf4j.org/images/concrete-bindings.png">

<link rel="canonical" href="http://yoursite.com/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>笔记-SpringBoot | 纸人</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	
	<a href="https://github.com/xingxing-j" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">纸人</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">已有的事，后必再有</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="search-pop-overlay">
  <div class="popup search-popup">
      <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

  </div>
</div>

  </div>
</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hu.png">
      <meta itemprop="name" content="纸人">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="纸人">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          笔记-SpringBoot
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-30 00:16:34" itemprop="dateCreated datePublished" datetime="2020-04-30T00:16:34+08:00">2020-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-05-09 18:17:47" itemprop="dateModified" datetime="2020-05-09T18:17:47+08:00">2020-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">后端学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>了解SpringBoot如何使用</p>
<a id="more"></a>

<h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h2 id="0-SpringBoot简述"><a href="#0-SpringBoot简述" class="headerlink" title="0. SpringBoot简述"></a>0. SpringBoot简述</h2><blockquote>
<p>SpringBoot 是Spring开源组织下的子项目，提供了Spring组件一站式解决方案，简化了Spring的使用难度，简省了繁琐的配置，提供了各种<strong>启动器</strong>，使开发者能快速上手。</p>
</blockquote>
<h2 id="1-SpringBoot优点"><a href="#1-SpringBoot优点" class="headerlink" title="1. SpringBoot优点"></a>1. SpringBoot优点</h2><ul>
<li><strong>独立运行</strong>：内嵌各种Servlet容器(Tomcat、Jetty等)，不需要打成war包部署到容器中，只打一个可执行的jar包就能独立运行。</li>
<li><strong>简化配置</strong>：spring-boot-starter-xxx<strong>启动器</strong>自动依赖其他组件，减少了Maven的配置</li>
<li><strong>自动配置</strong>：能根据当前类路径下的类、Jar包来自动配置bean。如添加一个spring-boot-starter-web启动器就能拥有web的功能，无需其他配置。</li>
<li><strong>无代码生成和XML配置</strong>：SpringBoot配置过程中无代码生成，无需XML配置就能完成所有配置工作，这些借助于条件注解来完成。</li>
<li><strong>应用监控</strong>：SpringBoot提供了一系列端点可以监控服务及应用。</li>
</ul>
<h2 id="2-HelloWorld示例"><a href="#2-HelloWorld示例" class="headerlink" title="2. HelloWorld示例"></a>2. HelloWorld示例</h2><h3 id="2-0-Maven设置"><a href="#2-0-Maven设置" class="headerlink" title="2.0. Maven设置"></a>2.0. Maven设置</h3><p>如果本地Maven配置未配好，需要在本地Maven的setting.xml文件里配一下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-导入SpringBoot相关的依赖"><a href="#2-1-导入SpringBoot相关的依赖" class="headerlink" title="2.1. 导入SpringBoot相关的依赖"></a>2.1. 导入SpringBoot相关的依赖</h3><p>在创建好Maven工程后，需要在pom文件里引入相关的依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-编写程序启动SpringBoot应用"><a href="#2-2-编写程序启动SpringBoot应用" class="headerlink" title="2.2. 编写程序启动SpringBoot应用"></a>2.2. 编写程序启动SpringBoot应用</h3><h4 id="2-2-0-主程序代码"><a href="#2-2-0-主程序代码" class="headerlink" title="2.2.0. 主程序代码"></a>2.2.0. 主程序代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@springBootApplication</span>：标注一个主程序类，表示这个是一个Springboot应用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldMainApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//启动</span></span><br><span class="line">        SpringApplication.run(HelloWorldMainApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-1-Controller层代码"><a href="#2-2-1-Controller层代码" class="headerlink" title="2.2.1. Controller层代码"></a>2.2.1. Controller层代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RestController：是spring4里的新注解，是<span class="doctag">@ResponseBody</span>和<span class="doctag">@Controller</span>的缩写。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello SpringBoot,this is my first Application"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之后启动，浏览器访问<code>localhost:8080/hello</code>进行测试即可</p>
<h3 id="2-3-简化部署"><a href="#2-3-简化部署" class="headerlink" title="2.3. 简化部署"></a>2.3. 简化部署</h3><h4 id="2-3-0-添加Maven插件"><a href="#2-3-0-添加Maven插件" class="headerlink" title="2.3.0 添加Maven插件"></a>2.3.0 添加Maven插件</h4><p>在Maven的pom.xml文件中配置插件，代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 该插件可以将应用打包成一个可执行的jar包；--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-1-打jar包"><a href="#2-3-1-打jar包" class="headerlink" title="2.3.1. 打jar包"></a>2.3.1. 打jar包</h4><p>使用<code>mvn package</code>命令打包</p>
<h4 id="2-3-2-运行"><a href="#2-3-2-运行" class="headerlink" title="2.3.2. 运行"></a>2.3.2. 运行</h4><p>在打包好的jar包的目录下，运行<code>java -jar jar包名称</code>进行测试</p>
<h2 id="3-HelloWorld示例探究"><a href="#3-HelloWorld示例探究" class="headerlink" title="3. HelloWorld示例探究"></a>3. HelloWorld示例探究</h2><h3 id="3-0-依赖"><a href="#3-0-依赖" class="headerlink" title="3.0. 依赖"></a>3.0. 依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--HelloWorld项目的父工程是 org.springframework.boot--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      而org.springframework.boot的父工程是spring-boot-dependencies</span></span><br><span class="line"><span class="comment">      它来管理Spring Boot应用里面的所有依赖版本；</span></span><br><span class="line"><span class="comment">      所以以后我们导入依赖默认是不需要写版本；（但没有在dependencies里面管理的依赖还是需要声明版本号的）</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-启动器"><a href="#3-1-启动器" class="headerlink" title="3.1. 启动器"></a>3.1. 启动器</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>以<code>spring-boot-starter-web</code>为例，该启动器为我们导入了web模块正常运行所依赖的组件。</p>
<p>SpringBoot将很多功能场景都抽取出来，做成了<strong>starters</strong>(启动器)，以后只要在项目中导入了这些相关场景的<strong>启动器</strong>，便会自动导入该场景的<strong>相关依赖</strong>。</p>
<h3 id="3-2-主程序"><a href="#3-2-主程序" class="headerlink" title="3.2. 主程序"></a>3.2. 主程序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldMainApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//启动</span></span><br><span class="line">        SpringApplication.run(HelloWorldMainApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@SpringBootApplication</code>: 该注解标注在SpringBoot的主配置类上，通过运行该类的main方法来启动SpringBoot应用。</p>
<p><code>@SpringBootApplication</code>注解的源码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)    <span class="comment">//可以给一个类型进行注解，比如类、接口、枚举</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)    <span class="comment">//可以保留到程序运行的时候，它会被加载进入到 JVM 中</span></span><br><span class="line"><span class="meta">@Documented</span>    <span class="comment">//将注解中的元素包含到 Javadoc 中去。</span></span><br><span class="line"><span class="meta">@Inherited</span>    <span class="comment">//继承，比如A类上有该注解，B类继承A类，B类就也拥有该注解</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*创建一个配置类，在配置类上添加 @ComponentScan 注解。</span></span><br><span class="line"><span class="comment">*该注解默认会扫描该类所在的包下所有的配置类，相当于之前的 &lt;context:component-scan&gt;。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(</span><br><span class="line">    excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">), @<span class="title">Filter</span>(</span></span><br><span class="line"><span class="class">    <span class="title">type</span> </span>= FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">)&#125;</span></span><br><span class="line"><span class="class">)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">SpringBootApplication</span></span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-0-SpringBootConfiguration"><a href="#3-2-0-SpringBootConfiguration" class="headerlink" title="3.2.0. @SpringBootConfiguration"></a>3.2.0. @SpringBootConfiguration</h4><p><code>@SpringBootConfiguration</code>注解标注在SpringBoot的配置类上，源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration</span><br></pre></td></tr></table></figure>

<h5 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h5><p>该注解用在Spring的配置类上，而配置类也是容器的一个组件(Component)。源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Configuration</span><br></pre></td></tr></table></figure>

<h4 id="3-2-1-EnableAutoConfiguration"><a href="#3-2-1-EnableAutoConfiguration" class="headerlink" title="3.2.1. @EnableAutoConfiguration"></a>3.2.1. @EnableAutoConfiguration</h4><p>该注解用来开启<strong>自动配置</strong>的，源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;AutoConfigurationImportSelector<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">EnableAutoConfiguration</span></span></span><br></pre></td></tr></table></figure>

<h5 id="AutoConfigurationPackage"><a href="#AutoConfigurationPackage" class="headerlink" title="@AutoConfigurationPackage"></a>@AutoConfigurationPackage</h5><p>字面意思，自动配置包，源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Import</span>(&#123;Registrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">AutoConfigurationPackage</span></span></span><br></pre></td></tr></table></figure>

<h6 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h6><p>@Import是Spring的底层注解，是用来给容器导入组件的</p>
<p><code>@Import({Registrar.class})</code>表示<code>org.springframework.boot.autoconfigure.AutoConfigurationPackages.Registrar</code>会将<strong>主配置类（@SpringBootApplication标注的类）的所在包</strong>及其下所有子包里面的所有组件注册到Spring容器中。</p>
<h5 id="Import-AutoConfigurationImportSelector-class"><a href="#Import-AutoConfigurationImportSelector-class" class="headerlink" title="@Import({AutoConfigurationImportSelector.class})"></a>@Import({AutoConfigurationImportSelector.class})</h5><p>​    同样的，<code>AutoConfigurationImportSelector.class</code>是将所有需要导入的组件<strong>以全类名的方式返回</strong>，之后这些组件就会被添加到容器中。这样便会给容器中导入非常多的自动配置类（<strong>xxxAutoConfiguration</strong>）</p>
<p>​    而Spring Boot在启动的时候从类路径下的<code>META-INF/spring.factories</code>中获取<code>@EnableAutoConfiguration</code>指定的值，将这些值作为自动配置类导入到容器中，帮我们进行自动配置工作。</p>
<h2 id="4-配置文件"><a href="#4-配置文件" class="headerlink" title="4. 配置文件"></a>4. 配置文件</h2><p>SpringBoot使用全局配置文件，<strong>用来修改SpringBoot自动配置的默认值</strong>，配置文件名是固定的：</p>
<ul>
<li>application.properties</li>
<li>application.yml</li>
</ul>
<h3 id="4-0-YAML"><a href="#4-0-YAML" class="headerlink" title="4.0. YAML"></a>4.0. YAML</h3><p>YAML(YAML Ain’t Markup Language)，通用的数据串行化格式，方便人类的读写。</p>
<h4 id="4-0-0-基本语法特点"><a href="#4-0-0-基本语法特点" class="headerlink" title="4.0.0. 基本语法特点"></a>4.0.0. 基本语法特点</h4><ul>
<li><strong>大小写敏感</strong></li>
<li><strong>使用缩进表示层级关系</strong></li>
<li><strong>缩进时不允许使用Tab键，只允许使用空格</strong></li>
<li><strong>缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</strong></li>
<li><strong>使用#表示注释</strong></li>
<li><strong>字符串可以不用引号标注</strong><ul>
<li>如使用<code>&quot;&quot;</code>双引号，则字符串里有转义符号的话<strong>不会转义</strong></li>
<li>如使用<code>&#39;&#39;</code>单引号，则字符串里有转义符号的话<strong>会转义</strong></li>
</ul>
</li>
</ul>
<h4 id="4-0-1-数据结构"><a href="#4-0-1-数据结构" class="headerlink" title="4.0.1. 数据结构"></a>4.0.1. 数据结构</h4><h5 id="map-–-哈希表"><a href="#map-–-哈希表" class="headerlink" title="map – 哈希表"></a>map – 哈希表</h5><p>键值对(<code>key : value</code>)，<code>:</code>冒号<strong>后面</strong>要有空格。同一缩进的所有键值对属于同一个map</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YAML 表示法1</span></span><br><span class="line"><span class="attr">age :</span> <span class="number">25</span></span><br><span class="line"><span class="attr">name :</span> <span class="string">Seven</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YAML 表示法2</span></span><br><span class="line"><span class="string">&#123;age</span> <span class="string">:</span> <span class="number">25</span><span class="string">,</span> <span class="attr">name :</span> <span class="string">Seven&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON表示法</span></span><br><span class="line"><span class="string">&#123;'age'</span> <span class="string">:</span> <span class="number">25</span><span class="string">,</span> <span class="string">'name'</span> <span class="string">:</span> <span class="string">'Seven'</span><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="list-–-列表"><a href="#list-–-列表" class="headerlink" title="list – 列表"></a>list – 列表</h5><p>使用连字符<code>-</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YAML 表示法1</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">a</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">b</span></span><br><span class="line"><span class="bullet">-</span> <span class="number">17</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YAML 表示法2</span></span><br><span class="line"><span class="string">[a,</span> <span class="string">b,</span> <span class="number">17</span><span class="string">]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON 表示法</span></span><br><span class="line"><span class="string">['a',</span> <span class="string">'b'</span><span class="string">,</span> <span class="number">17</span><span class="string">]</span></span><br></pre></td></tr></table></figure>

<h5 id="scalar-–-纯量"><a href="#scalar-–-纯量" class="headerlink" title="scalar – 纯量"></a>scalar – 纯量</h5><p>数据最小单位，不可以再分割</p>
<h5 id="map与list嵌套"><a href="#map与list嵌套" class="headerlink" title="map与list嵌套"></a>map与list嵌套</h5><p>map和list的元素可以是另一个map或者list或者scalar</p>
<h6 id="1-map-in-map"><a href="#1-map-in-map" class="headerlink" title="1. map in map"></a>1. map in map</h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YAML 表示</span></span><br><span class="line"><span class="attr">websites:</span></span><br><span class="line">  <span class="attr">YAML :</span> <span class="string">yaml.org</span></span><br><span class="line">  <span class="attr">Ruby :</span> <span class="string">ruby-lang.org</span></span><br><span class="line">  <span class="attr">Python :</span> <span class="string">python.org</span></span><br><span class="line">  <span class="attr">Perl:</span> <span class="string">use.perl.org</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON 表示</span></span><br><span class="line"><span class="string">&#123;</span> <span class="attr">websites:</span></span><br><span class="line">  <span class="string">&#123;</span> <span class="attr">YAML :</span> <span class="string">'yaml.org'</span><span class="string">,</span></span><br><span class="line">    <span class="attr">Ruby :</span> <span class="string">'ruby-lang.org'</span><span class="string">,</span></span><br><span class="line">    <span class="attr">Python :</span> <span class="string">'python.org'</span><span class="string">,</span></span><br><span class="line">    <span class="attr">Perl:</span> <span class="string">'use.perl.org'</span><span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="2-list-in-map"><a href="#2-list-in-map" class="headerlink" title="2. list in map"></a>2. list in map</h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YAML 表示</span></span><br><span class="line"><span class="string">language：</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">YAML</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Ruby</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Python</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Perl</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON 表示</span></span><br><span class="line"><span class="string">&#123;</span> <span class="attr">language :</span> <span class="string">['YAML',</span> <span class="string">'Ruby'</span><span class="string">,</span> <span class="string">'Python'</span><span class="string">,</span> <span class="string">'Perl'</span><span class="string">]&#125;</span></span><br></pre></td></tr></table></figure>

<h6 id="3-list-in-list"><a href="#3-list-in-list" class="headerlink" title="3. list in list"></a>3. list in list</h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YAML 表示法1</span></span><br><span class="line"><span class="bullet">-</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">Ruby</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Perl</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Python</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">C</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">C++</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Java</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YAML 表示法2</span></span><br><span class="line"><span class="bullet">-</span> <span class="bullet">-</span> <span class="string">Ruby</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Perl</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Python</span></span><br><span class="line"><span class="bullet">-</span> <span class="bullet">-</span> <span class="string">C</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">C++</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Java</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YAML 表示法3</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">[Ruby,</span> <span class="string">Perl,</span> <span class="string">Python]</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">[C,</span> <span class="string">C++,</span> <span class="string">Java]</span></span><br><span class="line"><span class="comment"># JSON 表示法</span></span><br><span class="line"><span class="string">[</span> <span class="string">[</span> <span class="string">'Ruby'</span><span class="string">,</span>  <span class="string">'Perl'</span><span class="string">,</span>  <span class="string">'Python'</span> <span class="string">],</span>  <span class="string">[</span> <span class="string">'C'</span><span class="string">,</span>  <span class="string">'C++'</span><span class="string">,</span>  <span class="string">'java'</span> <span class="string">]</span> <span class="string">]</span></span><br></pre></td></tr></table></figure>

<h6 id="4-map-in-list"><a href="#4-map-in-list" class="headerlink" title="4. map in list"></a>4. map in list</h6><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YAML 表示</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="attr">id :</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">name :</span> <span class="string">a</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="attr">id :</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">name :</span> <span class="string">b</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON 表示</span></span><br><span class="line"><span class="string">[</span> <span class="string">&#123;</span> <span class="attr">id :</span> <span class="number">1</span><span class="string">,</span>  <span class="attr">name :</span> <span class="string">'a'</span> <span class="string">&#125;,</span>  <span class="string">&#123;</span> <span class="attr">id :</span> <span class="number">2</span><span class="string">,</span> <span class="attr">name :</span> <span class="string">'b'</span> <span class="string">&#125;</span> <span class="string">]</span></span><br></pre></td></tr></table></figure>

<h3 id="4-1-配置文件的值注入"><a href="#4-1-配置文件的值注入" class="headerlink" title="4.1. 配置文件的值注入"></a>4.1. 配置文件的值注入</h3><h4 id="4-1-0-值注入的两种方式及其区别"><a href="#4-1-0-值注入的两种方式及其区别" class="headerlink" title="4.1.0. 值注入的两种方式及其区别"></a>4.1.0. 值注入的两种方式及其区别</h4><p>配置文件的值注入有两种方式，一是SpringBoot的<code>@ConfigurationProperties</code>注解，另一个是Spring原先的<code>@value</code>注解。</p>
<h5 id="二者的应用场景："><a href="#二者的应用场景：" class="headerlink" title="二者的应用场景："></a>二者的应用场景：</h5><ul>
<li>在某个业务逻辑中需要获取一下配置文件中的某项值，使用<code>@Value</code></li>
<li>专门编写了一个JavaBean来和配置文件隐形映射，可直接使用<code>@ConfigurationProperties</code></li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">@ConfigurationProperties</th>
<th align="center">@value</th>
</tr>
</thead>
<tbody><tr>
<td align="center">功能</td>
<td align="center">批量注入配置文件中的属性</td>
<td align="center">一个个指定再注入</td>
</tr>
<tr>
<td align="center">松散绑定</td>
<td align="center">支持</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">SpEL</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">JSR303数据校验</td>
<td align="center">支持</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">复杂类型封装</td>
<td align="center">支持</td>
<td align="center">不支持</td>
</tr>
</tbody></table>
<h5 id="松散绑定"><a href="#松散绑定" class="headerlink" title="松散绑定"></a>松散绑定</h5><p>​    例如 Person中有<code>lastname</code>属性，在配置文件中可以写成<code>lastName</code>或<code>lastname</code>或<code>last-name</code>或<code>last_name</code>等等</p>
<h4 id="4-1-1-ConfigurationProperties的值注入示例"><a href="#4-1-1-ConfigurationProperties的值注入示例" class="headerlink" title="4.1.1. @ConfigurationProperties的值注入示例"></a>4.1.1. @ConfigurationProperties的值注入示例</h4><h5 id="1-YAML配置文件的编写"><a href="#1-YAML配置文件的编写" class="headerlink" title="1. YAML配置文件的编写"></a>1. YAML配置文件的编写</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">    <span class="attr">lastName:</span> <span class="string">hello</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">    <span class="attr">boss:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">birth:</span> <span class="number">2020</span><span class="string">/02/02</span></span><br><span class="line">    <span class="attr">maps:</span> <span class="string">&#123;k1:</span> <span class="string">v1,k2:</span> <span class="string">v2&#125;</span></span><br><span class="line">    <span class="attr">lists:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">lisi</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">zhaoliu</span></span><br><span class="line">    <span class="attr">dog:</span> </span><br><span class="line">        <span class="attr">name:</span> <span class="string">狗</span></span><br><span class="line">        <span class="attr">age:</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>

<h5 id="2-JavaBean的编写"><a href="#2-JavaBean的编写" class="headerlink" title="2. JavaBean的编写"></a>2. JavaBean的编写</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * 将配置文件中配置的每一个属性的值，映射到这个组件中  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ConfigurationProperties</span>：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定；  </span></span><br><span class="line"><span class="comment"> * prefix = "person"：与配置文件中哪一个元素下面的所有属性进行一一映射  *  </span></span><br><span class="line"><span class="comment"> * 只有这个组件是容器中的组件，才能容器提供的<span class="doctag">@ConfigurationProperties</span>功能；  </span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span> </span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>) <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;       </span><br><span class="line">    <span class="keyword">private</span> String lastName;     </span><br><span class="line">    <span class="keyword">private</span> Integer age;     </span><br><span class="line">    <span class="keyword">private</span> Boolean boss;     </span><br><span class="line">    <span class="keyword">private</span> Date birth;       </span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;     <span class="keyword">private</span> List&lt;Object&gt; lists;     </span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br></pre></td></tr></table></figure>

<h5 id="3-在Maven的pom文件中导入处理器"><a href="#3-在Maven的pom文件中导入处理器" class="headerlink" title="3. 在Maven的pom文件中导入处理器"></a>3. 在Maven的pom文件中导入处理器</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入了这个配置文件处理器，配置文件进行绑定就会有提示--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="4-测试"><a href="#4-测试" class="headerlink" title="4. 测试"></a>4. 测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloworldquickstartApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-2-配置文件相关的注解"><a href="#4-1-2-配置文件相关的注解" class="headerlink" title="4.1.2. 配置文件相关的注解"></a>4.1.2. 配置文件相关的注解</h4><h5 id="PropertySource"><a href="#PropertySource" class="headerlink" title="@PropertySource"></a>@PropertySource</h5><p>该注解的作用是加载指定的配置文件，该注解的value是一个数组，所以可以加载多个配置文件</p>
<h6 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PropertySource</span>(value = &#123;<span class="string">"classpath:person.properties"</span>&#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br></pre></td></tr></table></figure>

<p>​    使用<code>@PropertySource</code>注解加载配置文件需要JavaBean使用<code>@Component</code>等注解而不是等待<code>@EnableConfigurationProperties</code>激活。</p>
<p>​    <code>@PropertySource</code>注解不支持YAML文件，只支持<code>.properties</code>格式的文件。</p>
<h5 id="ImportResource"><a href="#ImportResource" class="headerlink" title="@ImportResource"></a>@ImportResource</h5><p>SpringBoot不能自动识别Spring的配置文件。而<code>@ImportResource</code>注解用于导入Spring的配置文件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource</span>(locations = &#123;<span class="string">"classpath:beans.xml"</span>&#125;)</span><br><span class="line">导入Spring的配置文件让其生效</span><br></pre></td></tr></table></figure>

<h5 id="Bean"><a href="#Bean" class="headerlink" title="@Bean"></a>@Bean</h5><p>可使用<code>@Bean</code>给容器添加组件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configuration：指明当前类是一个配置类；就是来替代之前的Spring配置文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *相当于在配置文件中用&lt;bean&gt;&lt;bean/&gt;标签添加组件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">myPet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Pet pet = <span class="keyword">new</span> Pet();</span><br><span class="line">        pet.setName(<span class="string">"嘟嘟"</span>);</span><br><span class="line">        pet.setAge(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">return</span> pet;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-3-配置文件的占位符"><a href="#4-1-3-配置文件的占位符" class="headerlink" title="4.1.3. 配置文件的占位符"></a>4.1.3. 配置文件的占位符</h4><h5 id="使用占位符获取随机数"><a href="#使用占位符获取随机数" class="headerlink" title="使用占位符获取随机数"></a>使用占位符获取随机数</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$&#123;random.value&#125;</span><br><span class="line">$&#123;random.int&#125;</span><br><span class="line">$&#123;random.long&#125;</span><br><span class="line">$&#123;random.int(10)&#125;</span><br><span class="line">$&#123;random.int[1024,65536]&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用占位符获取之前配置的值"><a href="#使用占位符获取之前配置的值" class="headerlink" title="使用占位符获取之前配置的值"></a>使用占位符获取之前配置的值</h5><p>如果没有会原样输出，或者使用<code>:</code>指定默认值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">person.last-name=张三$&#123;random.uuid&#125;</span><br><span class="line">person.age=$&#123;random.int&#125;</span><br><span class="line">person.birth=2017/12/15</span><br><span class="line">person.boss=false</span><br><span class="line">person.maps.k1=v1</span><br><span class="line">person.maps.k2=14</span><br><span class="line">person.lists=a,b,c</span><br><span class="line">person.dog.name=$&#123;person.hello:hello&#125;_dog</span><br><span class="line">person.dog.age=15</span><br></pre></td></tr></table></figure>

<h3 id="4-2-Profile"><a href="#4-2-Profile" class="headerlink" title="4.2. Profile"></a>4.2. Profile</h3><h4 id="4-2-0-多Profile文件的命名格式"><a href="#4-2-0-多Profile文件的命名格式" class="headerlink" title="4.2.0. 多Profile文件的命名格式"></a>4.2.0. 多Profile文件的命名格式</h4><p>在编写主配置文件时，文件名可以是<code>application-{profile}.properties/yml</code></p>
<h4 id="4-2-1-激活指定profile"><a href="#4-2-1-激活指定profile" class="headerlink" title="4.2.1. 激活指定profile"></a>4.2.1. 激活指定profile</h4><h5 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h5><p>用yml的多文档块方式</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span>  <span class="comment">#指定属于哪个环境</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">prod</span>  <span class="comment">#指定属于哪个环境</span></span><br></pre></td></tr></table></figure>

<h5 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h5><p>在主配置文件(application.properties/yml)中用<code>spring.profiles.active=xxx</code>指定要使用的<strong>其他的配置文件</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在主配置文件中配置如下参数 </span></span><br><span class="line"><span class="string">spring.profiles.active=xxx</span></span><br><span class="line"><span class="attr">server:</span> </span><br><span class="line">    <span class="attr">port:</span> <span class="number">8181</span></span><br></pre></td></tr></table></figure>

<h5 id="方式三"><a href="#方式三" class="headerlink" title="方式三"></a>方式三</h5><p>用命令行的方式激活</p>
<p><strong>–spring.profiles.active=xxx</strong></p>
<h5 id="方式四"><a href="#方式四" class="headerlink" title="方式四"></a>方式四</h5><p>用虚拟机的方式激活</p>
<p><strong>-Dspring.profiles.active=xxx</strong></p>
<h3 id="4-3-配置文件的优先级和加载顺序"><a href="#4-3-配置文件的优先级和加载顺序" class="headerlink" title="4.3. 配置文件的优先级和加载顺序"></a>4.3. 配置文件的优先级和加载顺序</h3><p>在不指定被加载文件时，默认的加载顺序为：<strong>由里向外加载</strong>。(即优先级)<br>所以<strong>最外层的配置文件会被最后加载，会覆盖里层文件里的属性</strong>。</p>
<ul>
<li><code>file:./config/</code>：位于与jar包同级目录下的config文件夹，优先级<strong>最高</strong>，<strong>最后被加载</strong>。</li>
<li><code>file:./</code>：位于与jar包同级目录下</li>
<li><code>classpath:/config/</code>：idea环境下，resource文件夹下的config文件夹</li>
<li><code>classpath:/</code>：idea环境下，resource文件夹，<strong>优先级最低</strong>，<strong>最先被加载</strong>。</li>
</ul>
<p>还可通过<code>--spring.config.location</code>参数指定配置文件的新位置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --spring.config.location=G:/application.properties</span><br></pre></td></tr></table></figure>

<h3 id="4-4-外部配置加载顺序"><a href="#4-4-外部配置加载顺序" class="headerlink" title="4.4. 外部配置加载顺序"></a>4.4. 外部配置加载顺序</h3><p><strong>SpringBoot 也可以从以下位置加载配置。以下顺序优先级从高到低，高优先级配置会覆盖低优先级配置，所有配置会形成互补配置。</strong></p>
<h4 id="1-命令行参数"><a href="#1-命令行参数" class="headerlink" title="1.命令行参数"></a>1.命令行参数</h4><p>所有配置都可以在命令行上进行指定，多想配置用空格隔开。例如：</p>
<p><code>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --server.port=8087 --server.context-path=/abc</code></p>
<h4 id="2-来自java-comp-env的JNDI属性"><a href="#2-来自java-comp-env的JNDI属性" class="headerlink" title="2.来自java:comp/env的JNDI属性"></a>2.来自java:comp/env的JNDI属性</h4><h4 id="3-Java系统属性-System-getProperties"><a href="#3-Java系统属性-System-getProperties" class="headerlink" title="3.Java系统属性(System.getProperties())"></a>3.Java系统属性(System.getProperties())</h4><h4 id="4-操作系统环境变量"><a href="#4-操作系统环境变量" class="headerlink" title="4.操作系统环境变量"></a>4.操作系统环境变量</h4><h4 id="5-RandomValuePropertySource配置的random-属性值"><a href="#5-RandomValuePropertySource配置的random-属性值" class="headerlink" title="5.RandomValuePropertySource配置的random.*属性值"></a>5.RandomValuePropertySource配置的random.*属性值</h4><p><strong>由jar包外向jar包内进行寻找</strong>；<strong>优先加载带profile的</strong></p>
<h4 id="6-jar包外部的application-profile-properties或application-yml-带spring-profile-配置文件"><a href="#6-jar包外部的application-profile-properties或application-yml-带spring-profile-配置文件" class="headerlink" title="6.jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件"></a><strong>6.jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件</strong></h4><h4 id="7-jar包内部的application-profile-properties或application-yml-带spring-profile-配置文件"><a href="#7-jar包内部的application-profile-properties或application-yml-带spring-profile-配置文件" class="headerlink" title="7.jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件"></a><strong>7.jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件</strong></h4><p><strong>再加载不带profile的</strong></p>
<h4 id="8-jar包外部的application-properties或application-yml-不带spring-profile-配置文件"><a href="#8-jar包外部的application-properties或application-yml-不带spring-profile-配置文件" class="headerlink" title="8.jar包外部的application.properties或application.yml(不带spring.profile)配置文件"></a><strong>8.jar包外部的application.properties或application.yml(不带spring.profile)配置文件</strong></h4><h4 id="9-jar包内部的application-properties或application-yml-不带spring-profile-配置文件"><a href="#9-jar包内部的application-properties或application-yml-不带spring-profile-配置文件" class="headerlink" title="9.jar包内部的application.properties或application.yml(不带spring.profile)配置文件"></a><strong>9.jar包内部的application.properties或application.yml(不带spring.profile)配置文件</strong></h4><h4 id="10-Configuration注解类上的-PropertySource"><a href="#10-Configuration注解类上的-PropertySource" class="headerlink" title="10.@Configuration注解类上的@PropertySource"></a>10.@Configuration注解类上的@PropertySource</h4><h4 id="11-通过SpringApplication-setDefaultProperties指定的默认属性"><a href="#11-通过SpringApplication-setDefaultProperties指定的默认属性" class="headerlink" title="11.通过SpringApplication.setDefaultProperties指定的默认属性"></a>11.通过SpringApplication.setDefaultProperties指定的默认属性</h4><p>……</p>
<h2 id="5-Spring-Boot和日志"><a href="#5-Spring-Boot和日志" class="headerlink" title="5. Spring Boot和日志"></a>5. Spring Boot和日志</h2><h3 id="5-0-市面上的日志框架"><a href="#5-0-市面上的日志框架" class="headerlink" title="5.0. 市面上的日志框架"></a>5.0. 市面上的日志框架</h3><table>
<thead>
<tr>
<th>日志门面  （日志的抽象层）</th>
<th>日志实现</th>
</tr>
</thead>
<tbody><tr>
<td><del>JCL（Jakarta  Commons Logging）</del>    <br>SLF4j（Simple  Logging Facade for Java）   <br> <del><strong>jboss-logging</strong></del></td>
<td>Log4j<br>JUL(java.util.logging)<br>Log4j2 <br><strong>Logback</strong></td>
</tr>
</tbody></table>
<p>Spring框架默认是用<strong>JCL</strong>，<strong>而SpringBoot选用 SLF4j和logback</strong></p>
<h3 id="5-1-SLF4j的使用"><a href="#5-1-SLF4j的使用" class="headerlink" title="5.1. SLF4j的使用"></a>5.1. SLF4j的使用</h3><h4 id="5-1-0-如何在系统中使用SLF4j"><a href="#5-1-0-如何在系统中使用SLF4j" class="headerlink" title="5.1.0. 如何在系统中使用SLF4j"></a>5.1.0. 如何在系统中使用SLF4j</h4><p>​    开发时调用日志记录方法的正确姿势：不直接调用日志的实现类，而是调用日志抽象层里面的方法。详情见<a href="https://www.slf4j.org" target="_blank" rel="noopener">SLF4j官网</a></p>
<p>SLF4j的实现原理图示：</p>
<p><img src="http://www.slf4j.org/images/concrete-bindings.png" alt="SLF4j图示"></p>
<p>​    每一个日志实现框架都有属于自己的配置文件，使用SLF4j后，<strong>配置文件还是要用日志实现类本身的配置文件</strong>。</p>
<h4 id="5-1-1-统一日志记录"><a href="#5-1-1-统一日志记录" class="headerlink" title="5.1.1. 统一日志记录"></a>5.1.1. 统一日志记录</h4><p>如何让使用不同日志的框架<strong>统一使用SLf4j日志记录</strong>。</p>
<ul>
<li><p>先将系统中其他日志框架排除出去</p>
</li>
<li><p>再用中间包来替换原有的日志框架</p>
</li>
<li><p>最后导入SLF4j的其他实现类</p>
<p><strong>SLF4j日志适配图</strong></p>
</li>
</ul>
<p><img src="http://www.slf4j.org/images/legacy.png" alt="SLF4j日志适配图"></p>
<h3 id="5-2-SpringBoot日志关系"><a href="#5-2-SpringBoot日志关系" class="headerlink" title="5.2. SpringBoot日志关系"></a>5.2. SpringBoot日志关系</h3><p>SpringBoot是用<code>spring-boot-starter-logging</code>来记录日志的，用的时候只要引入相关依赖即可。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>SpringBoot底层使用的是SLF4j+logback进行日志记录</p>
</li>
<li><p>SpringBoot在底层把其他日志都替换成了SLF4j</p>
<p><img src="/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/SpringBoot%E5%BA%95%E5%B1%82%E6%97%A5%E5%BF%97%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB.png" alt="SpringBoot底层日志依赖关系"></p>
</li>
<li><p>SpringBoot能自动适配所有的日志，<strong>引入其他日志框架时，只需把这个框架依赖的日志框架排除掉即可</strong>。</p>
</li>
</ul>
<h3 id="5-3-SpringBoot的日志配置"><a href="#5-3-SpringBoot的日志配置" class="headerlink" title="5.3. SpringBoot的日志配置"></a>5.3. SpringBoot的日志配置</h3><h4 id="5-3-0-SpringBoot日志的默认配置示例"><a href="#5-3-0-SpringBoot日志的默认配置示例" class="headerlink" title="5.3.0. SpringBoot日志的默认配置示例"></a>5.3.0. SpringBoot日志的默认配置示例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//记录器</span></span><br><span class="line">Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//日志的级别；</span></span><br><span class="line">	<span class="comment">//由低到高   trace&lt;debug&lt;info&lt;warn&lt;error</span></span><br><span class="line">	<span class="comment">//可以调整输出的日志级别；之后打印日志就只会在这个级别以后的高级别生效</span></span><br><span class="line">	logger.trace(<span class="string">"这是trace日志..."</span>);</span><br><span class="line">	logger.debug(<span class="string">"这是debug日志..."</span>);</span><br><span class="line">	<span class="comment">//SpringBoot默认给我们使用的是info级别的，没有指定级别的就用SpringBoot默认规定的级别；root级别</span></span><br><span class="line">	logger.info(<span class="string">"这是info日志..."</span>);</span><br><span class="line">	logger.warn(<span class="string">"这是warn日志..."</span>);</span><br><span class="line">	logger.error(<span class="string">"这是error日志..."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-1-SpringBoot默认配置文件里的一些日志设置"><a href="#5-3-1-SpringBoot默认配置文件里的一些日志设置" class="headerlink" title="5.3.1. SpringBoot默认配置文件里的一些日志设置"></a>5.3.1. SpringBoot默认配置文件里的一些日志设置</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 该属性可以调整指定包下的SpringBoot的日志输出级别</span></span><br><span class="line"><span class="meta">logging.level.com.xxx</span>=<span class="string">trace</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#logging.file.name和logging.file.path待验证</span></span><br><span class="line"><span class="comment"># 不指定路径在当前项目下生成springboot.log日志</span></span><br><span class="line"><span class="comment"># 可以指定完整的路径；</span></span><br><span class="line"><span class="comment">#logging.file.name=G:/springboot.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在当前磁盘的根路径下创建spring文件夹和里面的log文件夹；使用 spring.log 作为默认文件</span></span><br><span class="line"><span class="meta">logging.file.path</span>=<span class="string">/spring/log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志输出格式：</span></span><br><span class="line"><span class="comment">	# %d表示日期时间，</span></span><br><span class="line"><span class="comment">	# %thread表示线程名，</span></span><br><span class="line"><span class="comment">	# %-5level：级别从左显示5个字符宽度</span></span><br><span class="line"><span class="comment">	# %logger&#123;50&#125; 表示logger名字最长50个字符，否则按照句点分割。 </span></span><br><span class="line"><span class="comment">	# %msg：日志消息，</span></span><br><span class="line"><span class="comment">	# %n是换行符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">    # %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置在控制台输出的日志的格式</span></span><br><span class="line"><span class="meta">logging.pattern.console</span>=<span class="string">%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span></span><br><span class="line"><span class="comment"># 指定文件中日志输出的格式</span></span><br><span class="line"><span class="meta">logging.pattern.file</span>=<span class="string">%d&#123;yyyy-MM-dd&#125; === [%thread] === %-5level === %logger&#123;50&#125; ==== %msg%n</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-2-专门指定日志配置文件"><a href="#5-3-2-专门指定日志配置文件" class="headerlink" title="5.3.2. 专门指定日志配置文件"></a>5.3.2. 专门指定日志配置文件</h4><p>在类路径下放每个日志框架的配置文件即可。每个日志框架对应的配置文件的名称如下：</p>
<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody><tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody></table>
<p>以logback为例，当日志的配置文件的默认名称为<code>logback.xml</code>时，该配置文件会被日志框架识别。</p>
<p>当日志的配置文件是其他名称时，如<code>logback-spring.xml</code>，会由SpringBoot直接进行日志解析。这时可以使用SpringBoot的<strong>高级Profile功能</strong>，只需在对应的配置文件里加上相应的<code>springProfile</code>标签即可，示例如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"stdout"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        日志输出格式：</span></span><br><span class="line"><span class="comment">			%d表示日期时间，</span></span><br><span class="line"><span class="comment">			%thread表示线程名，</span></span><br><span class="line"><span class="comment">			%-5level：级别从左显示5个字符宽度</span></span><br><span class="line"><span class="comment">			%logger&#123;50&#125; 表示logger名字最长50个字符，否则按照句点分割。 </span></span><br><span class="line"><span class="comment">			%msg：日志消息，</span></span><br><span class="line"><span class="comment">			%n是换行符</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.PatternLayout"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ----&gt; [%thread] ---&gt; %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!dev"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ==== [%thread] ==== %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-3-切换日志框架"><a href="#5-3-3-切换日志框架" class="headerlink" title="5.3.3. 切换日志框架"></a>5.3.3. 切换日志框架</h4><p>SpringBoot默认使用的日志框架是<strong>SLF4j+logback</strong>。要想切换成其他日志框架，需要在Maven的pom.xml文件中<strong>修改依赖关系</strong>。</p>
<p>以<strong>SLF4j+logback</strong>切换成<strong>SLF4j+log4j</strong>为例</p>
<h5 id="切换方式一"><a href="#切换方式一" class="headerlink" title="切换方式一"></a>切换方式一</h5><p>首先要排除<code>logback-classic</code>和<code>log4j-over-slf4j</code>，通过之前的SLF4j日志适配图，可以看出，要想使用log4j，需要slf4j-log4j12这个包。具体的<strong>日志适配图</strong>和<strong>添加修改的依赖关系</strong>如下：</p>
<p><strong>SLF4j日志适配图</strong></p>
<p><img src="http://www.slf4j.org/images/legacy.png" alt="SLF4j日志适配图"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="方式二-1"><a href="#方式二-1" class="headerlink" title="方式二"></a>方式二</h5><p>在Maven的pom.xml文件中直接去除<code>spring-boot-starter-logging</code>依赖，转而添加<code>spring-boot-starter-log4j2</code>依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-Spring-Boot的Web开发"><a href="#6-Spring-Boot的Web开发" class="headerlink" title="6. Spring Boot的Web开发"></a>6. Spring Boot的Web开发</h2><h3 id="6-0-SpringBoot对静态资源的映射规则"><a href="#6-0-SpringBoot对静态资源的映射规则" class="headerlink" title="6.0. SpringBoot对静态资源的映射规则"></a>6.0. SpringBoot对静态资源的映射规则</h3><h4 id="6-0-0-两种静态资源映射规则"><a href="#6-0-0-两种静态资源映射规则" class="headerlink" title="6.0.0. 两种静态资源映射规则"></a>6.0.0. 两种静态资源映射规则</h4><p>SpringBoot对静态资源的存放位置有具体的规定。静态资源具体放在哪呢，这跟一个类有关，那就是<strong>WebMvcAuotConfiguration</strong>，它的部分源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span> <span class="comment">// 添加资源映射的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Duration cachePeriod = <span class="keyword">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line">    CacheControl cacheControl = <span class="keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="string">"/webjars/**"</span>)</span><br><span class="line">                                             .addResourceLocations(<span class="string">"classpath:/META-INF/resources/webjars/"</span>)</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="comment">//静态资源文件夹映射</span></span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)</span><br><span class="line">                                             .addResourceLocations(getResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations()))</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    上述源码中的<code>addResourceHandlers</code>方法，规定了两条映射规则：</p>
<ul>
<li><p>其一，如果访问路径中是以<code>/webjars/**</code>结尾的话，SpringBoot会去<code>classpath:/META-INF/resources/webjars/</code>路径下找具体的静态资源。</p>
<p>​    例如，先在Maven的pom.xml文件中引入<strong>webjar格式</strong>的jQuery的Maven坐标，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入jquery-webjar--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    引入之后，它在Maven里的目录层级如下图：</p>
<p><img src="/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/jQuery-webjar.png" alt="jQuery-webjar"></p>
<p>​    那么之后，我们以<code>localhost:8080/webjars/jquery/3.3.1/jquery.js</code>形式的URL访问，便可获取到对应的静态资源。而<strong>webjar格式</strong>的Maven坐标可以去<a href="http://www.webjars.org/" target="_blank" rel="noopener">webjar官方网站</a>寻找。</p>
</li>
<li><p>其二，如果访问路径是以<code>/**</code>结尾(<strong>即访问任何路径</strong>)，且SpringBoot没有用第一种规则进行处理，那么便会在以下几种路径里寻找具体的资源。另外这个<code>/**</code>是由<strong>MvcProperties类</strong>中的常量staticPathPattern定义的。</p>
<p>例如，我们输入的URL为<code>localhost:8080/abc</code>时，便会去下面的路径里寻找abc资源。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"classpath:/META-INF/resources/", 意思是在当前类路径下的META-INF文件夹的resources文件夹里寻找具体的静态资源</span><br><span class="line">"classpath:/resources/",意思是在当前类路径下的resources文件夹里寻找具体的静态资源</span><br><span class="line">"classpath:/static/", 意思是在当前类路径下的static文件夹里寻找具体的静态资源</span><br><span class="line">"classpath:/public/" ,意思是在当前类路径下的public文件夹里寻找具体的静态资源</span><br></pre></td></tr></table></figure>

<p>​    为什么是这几个位置呢，这就跟<strong>ResourceProperties类</strong>的配置有关了，观察上方的<strong>WebMvcAuotConfiguration</strong>部分源码的第二条映射规则，可知它调用了<strong>ResourceProperties类</strong>的几个方法，而这几个静态资源的存放位置正是写在了<strong>ResourceProperties类</strong>里面，<strong>ResourceProperties类</strong>的部分源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以设置和静态资源有关的参数，缓存时间等</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.resources"</span>, ignoreUnknownFields = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; <span class="string">"classpath:/META-INF/resources/"</span>,</span><br><span class="line">			<span class="string">"classpath:/resources/"</span>, <span class="string">"classpath:/static/"</span>, <span class="string">"classpath:/public/"</span> &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Locations of static resources. Defaults to classpath:[/META-INF/resources/,</span></span><br><span class="line"><span class="comment">	 * /resources/, /static/, /public/].</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Whether to enable default resource handling.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> addMappings = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Chain chain = <span class="keyword">new</span> Chain();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Cache cache = <span class="keyword">new</span> Cache();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String[] getStaticLocations() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.staticLocations;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStaticLocations</span><span class="params">(String[] staticLocations)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.staticLocations = appendSlashIfNecessary(staticLocations);</span><br><span class="line">	&#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    既然写在了<strong>XxxProperties类中</strong>，根据之前的SpringBoot自动配置原理可知，我们可以在SpringBoot的配置文件中手动指定静态资源的存放位置，例如，我们设置类路径下的hello文件夹和xxx文件夹为静态资源的存放位置，写法如下：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.resources.static-location</span>=<span class="string">classpath:/hello,classpath:/xxx</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
<h4 id="6-0-1-欢迎页映射规则"><a href="#6-0-1-欢迎页映射规则" class="headerlink" title="6.0.1. 欢迎页映射规则"></a>6.0.1. 欢迎页映射规则</h4><p>关于欢迎页配置相关的SpringBoot源码改了，有时间再探究。</p>
<p><strong>欢迎页设置在所有的静态资源文件夹下，名称为index.html。</strong></p>
<p>例如访问<code>localhost:8080/</code>路径，找的便是index页面</p>
<p>​    <del>除去上面说的两种映射规则之外，SpringBoot还提供了<strong>欢迎页的映射规则</strong>，这也跟<strong>WebMvcAuotConfiguration</strong>有关，部分源码如下：</del></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置欢迎页映射</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext, FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> </span>&#123;</span><br><span class="line">    WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="keyword">new</span> WelcomePageHandlerMapping(</span><br><span class="line">        <span class="keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(),</span><br><span class="line">        <span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">    welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">    <span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-0-2-图标映射规则"><a href="#6-0-2-图标映射规则" class="headerlink" title="6.0.2. 图标映射规则"></a>6.0.2. 图标映射规则</h4><p>跟欢迎页一样，<code>favicon.ico</code>都是放在所有的静态资源文件夹下。</p>
<p>映射路径为<code>/favicon.ico</code>，具体行不行还没试。</p>
<p>SpringBoot2.2.6源码改了，WebMvcAuotConfiguration下的<strong>静态类FaviconConfiguration</strong>没有了，有时间再去找相应源码理解。</p>
<h3 id="6-1-模板引擎"><a href="#6-1-模板引擎" class="headerlink" title="6.1. 模板引擎"></a>6.1. 模板引擎</h3><p>JSP、Velocity、Freemarker、Thymeleaf等等等等</p>
<p>SpringBoot推荐使用Thymeleaf</p>
<p><strong>模板引擎图示</strong></p>
<p><img src="/2020/04/30/%E7%AC%94%E8%AE%B0-SpringBoot/%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E5%9B%BE%E7%A4%BA.png" alt="模板引擎图示"></p>
<h4 id="6-1-0-引入thymeleaf"><a href="#6-1-0-引入thymeleaf" class="headerlink" title="6.1.0. 引入thymeleaf"></a>6.1.0. 引入thymeleaf</h4><p>在Maven的pom.xml文件里配置相关标签。没试验过，用的时候要试验下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">thymeleaf.version</span>&gt;</span>3.0.9.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf.version</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 布局功能的支持程序  thymeleaf3主程序  layout2以上版本 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- thymeleaf2适配layout1--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-1-1-thymeleaf的使用"><a href="#6-1-1-thymeleaf的使用" class="headerlink" title="6.1.1. thymeleaf的使用"></a>6.1.1. thymeleaf的使用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.thymeleaf"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_ENCODING = StandardCharsets.UTF_8;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".html"</span>;</span><br></pre></td></tr></table></figure>

<p>将HTML页面放在类路径下的templates文件夹里，thymeleaf就能自动渲染。</p>
<h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ul>
<li><p>导入thymeleaf的名称空间</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用thymeleaf语法编写，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>成功！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--th:text 将div里面的文本内容设置为 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;hello&#125;"</span>&gt;</span>这是显示欢迎信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>至于thymeleaf的语法规则见thymeleaf常用语法一文。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java%E7%AC%94%E8%AE%B0/" rel="tag"># Java笔记</a>
              <a href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag"># 框架</a>
              <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/25/%E7%AC%94%E8%AE%B0-Maven/" rel="prev" title="笔记-Maven">
      <i class="fa fa-chevron-left"></i> 笔记-Maven
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/30/SpringBoot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E7%AE%80%E6%9E%90/" rel="next" title="SpringBoot自动配置原理简析">
      SpringBoot自动配置原理简析 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot"><span class="nav-text">SpringBoot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-SpringBoot简述"><span class="nav-text">0. SpringBoot简述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-SpringBoot优点"><span class="nav-text">1. SpringBoot优点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-HelloWorld示例"><span class="nav-text">2. HelloWorld示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-0-Maven设置"><span class="nav-text">2.0. Maven设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-导入SpringBoot相关的依赖"><span class="nav-text">2.1. 导入SpringBoot相关的依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-编写程序启动SpringBoot应用"><span class="nav-text">2.2. 编写程序启动SpringBoot应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-0-主程序代码"><span class="nav-text">2.2.0. 主程序代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-Controller层代码"><span class="nav-text">2.2.1. Controller层代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-简化部署"><span class="nav-text">2.3. 简化部署</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-0-添加Maven插件"><span class="nav-text">2.3.0 添加Maven插件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-打jar包"><span class="nav-text">2.3.1. 打jar包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2-运行"><span class="nav-text">2.3.2. 运行</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-HelloWorld示例探究"><span class="nav-text">3. HelloWorld示例探究</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-0-依赖"><span class="nav-text">3.0. 依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-启动器"><span class="nav-text">3.1. 启动器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-主程序"><span class="nav-text">3.2. 主程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-0-SpringBootConfiguration"><span class="nav-text">3.2.0. @SpringBootConfiguration</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Configuration"><span class="nav-text">@Configuration</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1-EnableAutoConfiguration"><span class="nav-text">3.2.1. @EnableAutoConfiguration</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#AutoConfigurationPackage"><span class="nav-text">@AutoConfigurationPackage</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Import"><span class="nav-text">@Import</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Import-AutoConfigurationImportSelector-class"><span class="nav-text">@Import({AutoConfigurationImportSelector.class})</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-配置文件"><span class="nav-text">4. 配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-0-YAML"><span class="nav-text">4.0. YAML</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-0-0-基本语法特点"><span class="nav-text">4.0.0. 基本语法特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-0-1-数据结构"><span class="nav-text">4.0.1. 数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#map-–-哈希表"><span class="nav-text">map – 哈希表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#list-–-列表"><span class="nav-text">list – 列表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#scalar-–-纯量"><span class="nav-text">scalar – 纯量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#map与list嵌套"><span class="nav-text">map与list嵌套</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-map-in-map"><span class="nav-text">1. map in map</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-list-in-map"><span class="nav-text">2. list in map</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-list-in-list"><span class="nav-text">3. list in list</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-map-in-list"><span class="nav-text">4. map in list</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-配置文件的值注入"><span class="nav-text">4.1. 配置文件的值注入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-0-值注入的两种方式及其区别"><span class="nav-text">4.1.0. 值注入的两种方式及其区别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#二者的应用场景："><span class="nav-text">二者的应用场景：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#松散绑定"><span class="nav-text">松散绑定</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-1-ConfigurationProperties的值注入示例"><span class="nav-text">4.1.1. @ConfigurationProperties的值注入示例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-YAML配置文件的编写"><span class="nav-text">1. YAML配置文件的编写</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-JavaBean的编写"><span class="nav-text">2. JavaBean的编写</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-在Maven的pom文件中导入处理器"><span class="nav-text">3. 在Maven的pom文件中导入处理器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-测试"><span class="nav-text">4. 测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-2-配置文件相关的注解"><span class="nav-text">4.1.2. 配置文件相关的注解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#PropertySource"><span class="nav-text">@PropertySource</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#示例"><span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ImportResource"><span class="nav-text">@ImportResource</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Bean"><span class="nav-text">@Bean</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-3-配置文件的占位符"><span class="nav-text">4.1.3. 配置文件的占位符</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用占位符获取随机数"><span class="nav-text">使用占位符获取随机数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用占位符获取之前配置的值"><span class="nav-text">使用占位符获取之前配置的值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-Profile"><span class="nav-text">4.2. Profile</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-0-多Profile文件的命名格式"><span class="nav-text">4.2.0. 多Profile文件的命名格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-1-激活指定profile"><span class="nav-text">4.2.1. 激活指定profile</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#方式一"><span class="nav-text">方式一</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式二"><span class="nav-text">方式二</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式三"><span class="nav-text">方式三</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式四"><span class="nav-text">方式四</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-配置文件的优先级和加载顺序"><span class="nav-text">4.3. 配置文件的优先级和加载顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-外部配置加载顺序"><span class="nav-text">4.4. 外部配置加载顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-命令行参数"><span class="nav-text">1.命令行参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-来自java-comp-env的JNDI属性"><span class="nav-text">2.来自java:comp&#x2F;env的JNDI属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Java系统属性-System-getProperties"><span class="nav-text">3.Java系统属性(System.getProperties())</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-操作系统环境变量"><span class="nav-text">4.操作系统环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-RandomValuePropertySource配置的random-属性值"><span class="nav-text">5.RandomValuePropertySource配置的random.*属性值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-jar包外部的application-profile-properties或application-yml-带spring-profile-配置文件"><span class="nav-text">6.jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-jar包内部的application-profile-properties或application-yml-带spring-profile-配置文件"><span class="nav-text">7.jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-jar包外部的application-properties或application-yml-不带spring-profile-配置文件"><span class="nav-text">8.jar包外部的application.properties或application.yml(不带spring.profile)配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-jar包内部的application-properties或application-yml-不带spring-profile-配置文件"><span class="nav-text">9.jar包内部的application.properties或application.yml(不带spring.profile)配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-Configuration注解类上的-PropertySource"><span class="nav-text">10.@Configuration注解类上的@PropertySource</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-通过SpringApplication-setDefaultProperties指定的默认属性"><span class="nav-text">11.通过SpringApplication.setDefaultProperties指定的默认属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Spring-Boot和日志"><span class="nav-text">5. Spring Boot和日志</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-0-市面上的日志框架"><span class="nav-text">5.0. 市面上的日志框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-SLF4j的使用"><span class="nav-text">5.1. SLF4j的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-0-如何在系统中使用SLF4j"><span class="nav-text">5.1.0. 如何在系统中使用SLF4j</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-1-统一日志记录"><span class="nav-text">5.1.1. 统一日志记录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-SpringBoot日志关系"><span class="nav-text">5.2. SpringBoot日志关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-SpringBoot的日志配置"><span class="nav-text">5.3. SpringBoot的日志配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-0-SpringBoot日志的默认配置示例"><span class="nav-text">5.3.0. SpringBoot日志的默认配置示例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-1-SpringBoot默认配置文件里的一些日志设置"><span class="nav-text">5.3.1. SpringBoot默认配置文件里的一些日志设置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-2-专门指定日志配置文件"><span class="nav-text">5.3.2. 专门指定日志配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-3-切换日志框架"><span class="nav-text">5.3.3. 切换日志框架</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#切换方式一"><span class="nav-text">切换方式一</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式二-1"><span class="nav-text">方式二</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Spring-Boot的Web开发"><span class="nav-text">6. Spring Boot的Web开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-0-SpringBoot对静态资源的映射规则"><span class="nav-text">6.0. SpringBoot对静态资源的映射规则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-0-0-两种静态资源映射规则"><span class="nav-text">6.0.0. 两种静态资源映射规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-0-1-欢迎页映射规则"><span class="nav-text">6.0.1. 欢迎页映射规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-0-2-图标映射规则"><span class="nav-text">6.0.2. 图标映射规则</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-模板引擎"><span class="nav-text">6.1. 模板引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-0-引入thymeleaf"><span class="nav-text">6.1.0. 引入thymeleaf</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-1-thymeleaf的使用"><span class="nav-text">6.1.1. thymeleaf的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#步骤"><span class="nav-text">步骤</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="纸人"
      src="/images/hu.png">
  <p class="site-author-name" itemprop="name">纸人</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">76</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        


<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">纸人</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.2
  </div>


<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共91.8k字</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  
  
  
	<script type="text/javascript"
	color="0,0,255" opacity='0.7' zIndex="-1" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  
</body>
</html>
